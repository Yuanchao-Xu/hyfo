{
    "contents" : "#require(ncdf)\nsource(\"C:\\\\DHI_Projects\\\\11811405\\\\Seasonal_Forecasting\\\\R\\\\Data_Analysis\\\\Main.R\")\n\nfilePath <- file.choose()\n#a <- open.ncdf(filePath)\n#a1 <- get.var.ncdf(a,varid = 'pre')\n#write(a1,'C:\\\\DHI_Projects\\\\11811405\\\\Seasonal_Forecasting\\\\Data\\\\spain02Pr\\\\pre.txt',ncol=1)\n# for GRU data, catchment, latLim= c(42.8,44.5) , lonLim=c(-2.4,-1.5)\nb <- loadGridData(filePath, \"pr\", year = 2005:2007,latLim= c(43,44.5) , lonLim=c(-2.4,-0.5) , season = NULL, dictionary=FALSE)\nb <- loadGridData(filePath, \"pr\", year = 2005:2007,latLim= c(36,43.8) , lonLim=c(-9.2,4.4) , season = NULL, dictionary=FALSE)\n\n\nfrc <- loadECOMS(dataset = \"System4_seasonal_15\", var = \"tp\", members = 1, \n                 lonLim = c(-2.4,-1.5), latLim = c(42.8,44.5), season = 8, years = 1999:2008, leadMonth = 1, time = \"DD\")\n\n\n\ndata1 <- getSpatialMap(b, method = 'meanAnnual',outputData = T, plotScale = 'sqrt',catchment = NULL, points = NULL)\n\n\n\ndata2 <- getPreciBar(b,'meanMonthly',outputData = T,plotRange = T)\n\n\n\na <- data.frame(mon = month.abb[1:12],value = data2)\na$mon <- factor(a$mon,levels=a$mon,ordered=T)\n\np <- ggplot(a)+\n  geom_bar(aes(x=mon,y=value),stat='identity')\nprint (p)\n\n\n\n## GIS reading\n\nfilePath <- file.choose()\nstations <- read.table(filePath, header = T, sep = ',') \nstations <- stations[,c(3,7,8,9,10)]\n\npoints <- data.frame(name = stations[,1], lon = stations[,3], lat = stations[,4], z = stations[,5], value = stations[,2])\n\nmainLayer <- ggplot(points)+\n  geom_point(aes(x = lon, y = lat, size = value, colour = z))+\n  scale_colour_gradientn(colours = c('blue','black'))\nprint (mainLayer)\n\n\n##ggplot map\nx <- data1\ncolnames(x) <- round(lon,2)\nrownames(x) <- round(lat,2)\n\nworld_map <- map_data('world')\n\ntheme_set(theme_bw())\np <- ggplot(data = melt(x))\np + geom_tile(aes(x=Var2,y=Var1,fill = value))+\n  scale_fill_gradientn(colours = c('yellow','orange','red'),na.value='transparent',trans='sqrt')+\n  geom_map(data = world_map,map=world_map,aes(map_id=region),fill='transparent',color='black')+\n  guides(fill=guide_colorbar(title='Rainfall (mm)'))+\n  xlab('adfafda')+\n  ylab('dafdafa')+\n  ggtitle('dafdadfafa')+\n  theme(plot.title=element_text(size=30,face='bold'))+\n  geom_text(x=min(lon)+0.75*(max(lon)-min(lon)),y=40,label='dasfafd')+\n  geom_polygon(data=c,aes(long,lat,group=group),color='black',fill='transparent')\n\n\n####################### Getting catchment\n\na <- catchment\na@data$id <- rownames(a@data)\nb <- fortify(a,region='id')\nc <- join(b,a@data,by='id')\n\nfilePath <- file.choose()\ncatName <- tail(strsplit(filePath,'\\\\\\\\')[[1]],1)#needs to be four \\, caused by some window system problem\ncatName1 <- strsplit(catName,'\\\\.')[[1]][1]\ncatName2 <- paste('\\\\\\\\',catName, sep = '')\nfolderName <- strsplit(filePath,catName2)[[1]]\ncatchment <- rgdal::readOGR(folderName,catName1)\nplot(catchment,add = TRUE)\n\nfilePath <- file.choose()\na <- read.table(filePath, header = T)\n",
    "created" : 1434458910234.000,
    "dirty" : false,
    "encoding" : "ASCII",
    "folds" : "",
    "hash" : "963969872",
    "id" : "71C90589",
    "lastKnownWriteTime" : 1435244841,
    "path" : "C:/DHI_Projects/11811405/Seasonal_Forecasting/R/test.R",
    "project_path" : null,
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}